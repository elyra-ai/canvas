{
  "titleDefinition": {
    "title": "Custom Controls and Operators"
  },
  "current_parameters": {
    "custom_toggle": true,
    "structuretable": [
      [
        "BP",
        false,
        [
          20,
          "low"
        ]
      ],
      [
        "Age",
        true,
        [
          50,
          "high"
        ]
      ]
    ],
    "custom_op_num": 0,
    "valueProperties": [
      [
        "BP",
        "ci"
      ],
      [
        "Age",
        "cs"
      ]
    ]
  },
  "parameters": [
    {
      "id": "custom_toggle",
      "type": "boolean"
    },
    {
      "id": "structuretable",
      "type": "array[structuretable]",
      "role": "column",
      "required": true
    },
    {
      "id": "custom_op_num",
      "type": "integer"
    },
    {
      "id": "colors",
      "enum": [
        "blue"
      ]
    },
    {
      "id": "valueProperties",
      "type": "array[valueSubProperties]",
      "default": []
    }
  ],
  "complex_types": [
    {
      "id": "structuretable",
      "key_definition": {
        "id": "field",
        "type": "string",
        "role": "column",
        "default": ""
      },
      "parameters": [
        {
          "id": "toggle",
          "type": "boolean",
          "default": false
        },
        {
          "id": "sub-structuretable",
          "type": "array[sub-structuretable]",
          "default": [
            0,
            "Value..."
          ]
        }
      ]
    },
    {
      "id": "sub-structuretable",
      "key_definition": {
        "id": "age",
        "type": "integer"
      },
      "parameters": [
        {
          "id": "value",
          "type": "string"
        }
      ]
    },
    {
      "id": "valueSubProperties",
      "type": "object",
      "parameters": [
        {
          "id": "value",
          "type": "string",
          "required": false
        },
        {
          "id": "value-ci-cs",
          "enum": [
            "cs",
            "ci"
          ],
          "default": "cs"
        }
      ]
    }
  ],
  "uihints": {
    "id": "IBM.Custom.Controls",
    "icon": "images/custom.svg",
    "label": {
      "default": "Custom Controls"
    },
    "description": {
      "default": "Parameter def for custom controls"
    },
    "parameter_info": [
      {
        "parameter_ref": "custom_toggle",
        "label": {
          "default": "Custom Toggle"
        },
        "control": "custom",
        "custom_control_id": "harness-custom-toggle-control",
        "class_name": "custom-control-class"
      },
      {
        "parameter_ref": "colors",
        "label": {
          "default": "Colors"
        },
        "description": {
          "default": "Enum values change based on value of toggle"
        },
        "control": "oneofselect"
      },
      {
        "parameter_ref": "structuretable",
        "required": true,
        "label": {
          "default": "Table"
        },
        "description": {
          "default": "This table has a custom control.",
          "placement": "on_panel"
        }
      },
      {
        "parameter_ref": "custom_op_num",
        "label": {
          "default": "Integer"
        },
        "description": {
          "default": "numberfield with an error when value > 100 using a custom operator called `customMax`"
        }
      },
      {
        "parameter_ref": "valueProperties",
        "label": {
          "default": "Join Keys"
        },
        "description": {
          "default": "When all rows in 'Case sensitive' column have value 'ci', entire column will be hidden.",
          "placement": "on_panel"
        },
        "resource_key": "valuePropertiesRKey"
      }
    ],
    "complex_type_info": [
      {
        "complex_type_ref": "structuretable",
        "moveable_rows": true,
        "key_definition": {
          "parameter_ref": "field",
          "width": 40,
          "label": {
            "default": "Field"
          }
        },
        "parameters": [
          {
            "parameter_ref": "toggle",
            "width": 40,
            "label": {
              "default": "Toggle"
            },
            "control": "custom",
            "custom_control_id": "harness-custom-toggle-control",
            "edit_style": "inline",
            "data": {
              "type": "toggle"
            },
            "class_name": "table-custom-control-class"
          },
          {
            "parameter_ref": "sub-structuretable",
            "width": 40,
            "label": {
              "default": "Custom"
            },
            "control": "custom",
            "custom_control_id": "harness-custom-table-control",
            "edit_style": "on_panel",
            "data": {
              "type": "table"
            },
            "class_name": "table-on-panel-custom-control-class"
          }
        ]
      },
      {
        "complex_type_ref": "sub-structuretable",
        "moveable_rows": true,
        "visible": false,
        "key_definition": {
          "parameter_ref": "age",
          "width": 20,
          "label": {
            "default": "Age"
          }
        },
        "parameters": [
          {
            "parameter_ref": "value",
            "width": 20,
            "label": {
              "default": "Value"
            }
          }
        ]
      },
      {
        "complex_type_ref": "valueSubProperties",
        "label": {
          "default": "Add valueSubProperties"
        },
        "parameters": [
          {
            "parameter_ref": "value",
            "label": {
              "resource_key": "valueRkey.label"
            },
            "width": 20,
            "edit_style": "inline",
            "resource_key": "valueRKey"
          },
          {
            "parameter_ref": "value-ci-cs",
            "label": {
              "resource_key": "value-ci-csRkey.label"
            },
            "width": 20,
            "edit_style": "on_panel",
            "resource_key": "value-ci-csRKey"
          }
        ],
        "row_selection": "single"
      }
    ],
    "group_info": [
      {
        "id": "custom-panel",
        "label": {
          "default": "Custom Controls"
        },
        "type": "controls",
        "parameter_refs": [
          "custom_toggle",
          "structuretable",
          "colors",
          "valueProperties"
        ]
      },
      {
        "id": "custom-ops",
        "label": {
          "default": "Custom Operators"
        },
        "type": "controls",
        "parameter_refs": [
          "custom_op_num"
        ]
      }
    ]
  },
  "conditions": [
    {
      "validation": {
        "fail_message": {
          "type": "error",
          "focus_parameter_ref": "custom_op_num",
          "message": {
            "default": "Value needs to be less than 100"
          }
        },
        "evaluate": {
          "condition": {
            "parameter_ref": "custom_op_num",
            "op": "customMax",
            "value": 100
          }
        }
      }
    },
    {
      "visible": {
        "parameter_refs": [
          "valueProperties[1]"
        ],
        "evaluate": {
          "condition": {
            "parameter_ref": "valueProperties[1]",
            "op": "customHideColumn",
            "value": "cs"
          }
        }
      }
    }
  ],
  "dataset_metadata": [
    {
      "fields": [
        {
          "name": "age",
          "type": "integer",
          "metadata": {
            "description": "",
            "measure": "range",
            "modeling_role": "input"
          }
        },
        {
          "name": "BP",
          "type": "string",
          "metadata": {
            "description": "",
            "measure": "discrete",
            "modeling_role": "input"
          }
        },
        {
          "name": "Na",
          "type": "double",
          "metadata": {
            "description": "",
            "measure": "range",
            "modeling_role": "input"
          }
        },
        {
          "name": "drug",
          "type": "string",
          "metadata": {
            "description": "",
            "measure": "discrete",
            "modeling_role": "input"
          }
        }
      ]
    }
  ],
  "resources": {
    "valueRkey.label": "Value",
    "value-ci-csRkey.label": "Case sensitive",
    "value-ci-cs.description": "Whether this column is case sensitive or not."
  }
}
